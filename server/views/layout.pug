doctype html
html
  head
    meta(charset="utf-8")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    title Chat App
    link(rel="stylesheet", href="/css/style.css")

    //- Eksponér bruger-objekt tidligt så scripts kan bruge det
    script.
      window.USER = !{JSON.stringify(user || null)};
      // window.CHATS kan sættes fra chat.pug (server-side) hvis ønsket
      if (!window.CHATS) window.CHATS = [];

  body
    .topbar
      .top-left
        a.logo(href="/") Chat App
      .top-right
        if user
          span.user-info Velkommen #{user.username} (niveau #{user.accessLevel})
          a(href="/logout") Logout
        else
          a(href="/users/login") Login
    
    block content

    //- Client scripts
    script(src="/client/api.js")
    script(type="module", src="/client/app.js")